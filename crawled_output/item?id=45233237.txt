Recreating the US/* time zone situation | Hacker NewsHacker Newsnew | past | comments | ask | show | jobs | submitloginRecreating the US/* time zone situation (rachelbythebay.com)84 points by move-on-by 10 hours ago
| hide | past | favorite | 54 comments
equinoxnemesis 7 hours ago
| next [–]
Context on "THE ONE", a phrase used in this post, because it wasn't obvious to me initially.https://rachelbythebay.com/w/2018/04/28/meta/replyJoker_vD 1 hour ago
| parent | next [–]
That's the problem with writing posts both of the "everyone else is doing things WRONG, those dang fools" (e.g. the series on RSS readers) and "oops, I did a stupid mistake, heh, TIL" styles and variety: the latter ones tend to attract comments from "The One" (oh noes) referencing the first kind of posts. Naturally, a humble person would simply read them, note them, and move on withouth replying — but a humble would person would not write the "everyone else is doing things WRONG, those dang fools" kind of posts either in the first place; and so we get the third kind of posts, the ones with "yeah, I did a small mistake, but I've admitted it myself, so no one else is allowed to criticize me; anyway..." disclaimer on the top.P.S. I do distictly remember how a reply on HN to one of her earlier posts on RSS clients mentioned that her laments kinda miguided since her own feed doesn't set one very well-documented and basic cache-controlling HTTP header that most readers actually do respect; but some time later in her later post she described that header as matter-of-fact knowlewdge, no "I've learned about this one recently" remark or anything, and by that time, her RSS feed had started setting it.replyflomo 4 hours ago
| parent | prev | next [–]
Thanks, I missed it.(I should note that in my crowd, references to this movie are always super-negative. "The One" gets damned to hell to eternally fight, but never win his battle.)replyfweimer 2 hours ago
| prev | next [–]
The core issue is that tzdata files do not contain the time zone identifier. If you are unlucky in /etc/localtime is not a symbolic link, you have to scan the files in /usr/share/zoneinfo to find a match.
PostgreSQL prefers shorter names: https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit...That's why "US" wins over "America".replyp_ing 10 hours ago
| prev | next [–]
Read the previous blog post [0] -- this one is disjointed without it. I dislike TZ selectors that use locations (cities, countries, etc.). Let PDT be PDT(-8) and PST be PST(-7). Why do I need to choose Cupertino, CA (or LA in the blog post example) -- locations over 1k miles away from me? And while I certainly understand where Cupertino is and how it relates to my TZ, what if someone else doesn't? Cupertino isn't a major population center.Anyway, poor UX. But of course TZ names could also be argued as poor UX. What if you just did PST/PDT as Los Angeles, CA; Oregon, OR, and Seattle, WA all on separate line items? Sure, it's duplicate data but a backend system (Postgres config files, say) should only store the value of the TZ, i.e. -7 / -8. At least a user could recognize 'oh, I drive to xyz major city occasionally, that's the choice I want'.To keep ranting, I checked macOS 15 TZ selector for PDT/PST. The selector itself is labeled "Closest city". It has numerous locations in California, a few in Nevada, and a couple in Mexico. No cities in Oregon, Washington, or Idaho (and Hyder, AK... neat [1]).Closest is a stretch, like I said, over 1K miles from LA. But why several California cities, including minor ones like Oceanside (~175K people), but nothing in Oregon (Eugene, also 175K), Portland (652K), or Washington - Tacoma (220K), Seattle (740K). Note I did not look for the smallest city in the macOS CA list.It's weird to me. Maybe it's because Oregon == Intel and Washington == Microsoft. ;-)[0] https://rachelbythebay.com/w/2025/09/11/debtz/[1] https://en.wikipedia.org/wiki/Pacific_Time_Zone#United_State...replyAloisius 5 hours ago
| parent | next [–]
> Anyway, poor UX. But of course TZ names could also be argued as poor UX. What if you just did PST/PDT as Los Angeles, CA; Oregon, OR, and Seattle, WA all on separate line items? Sure, it's duplicate data but a backend system (Postgres config files, say) should only store the value of the TZ, i.e. -7 / -8.Because that doesn't tell you when the timezone changes. Two locales can share timezones but start or end daylight savings time at different times.For instance, Cuba and Florida are both -4 / -5, but Cuba starts and ends daylight savings time 2 hours and 1 hour, respectively, before Florida.Then there's the fact that locales, once in a while, will change what timezone they're in (like Samoa in 2011) or stop/start observing daylight savings time. Having the timezone set to a place largely solves this problem.replyjolmg 9 hours ago
| parent | prev | next [–]
> Let PDT be PDT(-8) and PST be PST(-7). Why do I need to choose Cupertino, CA (or LA in the blog post example)Whether daylight savings time is being used at a given location at a given time of year is a matter of government policy. The city-based timezone selectors should handle that automatically based on the jurisdiction you choose.> Sure, it's duplicate data but a backend system (Postgres config files, say) should only store the value of the TZ, i.e. -7 / -8.Then the time may be wrong for half the year depending on where you are.replythemafia 6 hours ago
| root | parent | next [–]
> The city-based timezone selectorsThere's no America/Salt_Lake_City you're recommended to use America/Boise instead.
The people in Salt Lake City are about as far away from Boise as you can get and Salt Lake City is more easily recognized as a landmark then Boise.
The process of choosing which cities should be landmark cities comes across as faulty and uninformed.replyAloisius 5 hours ago
| root | parent | next [–]
The reason why certain cities get entries is because sometime after time began (1970-01-01), the region they're in changed their timezone (usually adopting or dropping DST or changing when it began). Those changes need to be recorded in the timezone database. The largest city in the affected area is typically chosen to be representative of the area.Boise has its own entry because in 1974, the Emergency Daylight Time Act shifted when DST began in Southern Idaho and eastern Oregon. Boise is the largest city in the region.Technically, if you're in Salt Lake City, you should be using America/Denver, not Boise because of this, otherwise if you say, opened a calendar from 1974, everything will be off by an hour.If Utah made DST there begin a day earlier this year, Salt Lake City would probably get an entry too.replyskissane 57 minutes ago
| root | parent | next [–]
I think for the US, they should ensure tzdata contains at least one city for every state. That’s what they do for Australia. Now, it so happens their current rules-only add city if in recent decades it had distinct time zone rules-happen to produce that outcome for Australia, because in Australia time is a state issue and historically every state decided for itself whether to have daylight savings and when to begin/end it. Still, I think they should amend their rules to say “capital and/or largest city for every first-level subdivision of major countries”, given some reasonably objective definition of “major” (e.g. G20 nations)replyMacha 30 minutes ago
| root | parent | next [–]
There's a tradeoff between subdivisions per country and the UX that causes for timezine picker dropdowns in making everyone else scroll past all the US, Canada, India etc. subdivisionsreplySkiFire13 2 hours ago
| root | parent | prev | next [–]
> Those changes need to be recorded in the timezone database.The issue with this thinking is that all existing datimes referring to that region will continue using the old timezone because the new one didn't exist yet.replyjolmg 6 hours ago
| root | parent | prev | next [–]
> The process of choosing which cities should be landmark cities comes across as faulty and uninformed.I think it's unlikely they're chosen as landmark cities. More likely, timezones were uniform, then some government likely did their own thing in their jurisdiction. The change was then represented as a new timezone named after the place where the change is centered. IOW, the names have more to do with some random divergence that happened at some point in history, rather than what landmarks are the most recognized for today's timezones. Re: Boise & Salt Lake City, maybe Boise was the first to do their own thing while Salt Lake City had a different timezone. Maybe Salt Lake City later decided to adjust their timezone to fit Boise's to facilitate commerce between their states.replyjen20 6 hours ago
| root | parent | prev | next [–]
Salt Lake City is a 4.5-5 hour drive from Boise. If you want a better example, there are no cities in Texas in the list, and Chicago is a lot further away than Boise is from Salt Lake City!replyDangitBobby 6 hours ago
| root | parent | next [–]
Yep, I pick Chicago for my timezone and it's roughly a 7 hour drive. I think have major cities represent broad timezones is a good UX tradeoff.replybbanyc 8 hours ago
| parent | prev | next [–]
You can't just go by time zone names because there are weird exceptions, like most of Arizona not doing DST. Then there's Indiana, which didn't do DST until 20 years ago, and there are some counties that switched time zones when the DST law took effect... if you're in one of those counties will you just accept old timestamps being an hour off? Granted, this gradually becomes less of an issue the further we get from the change. But nothing guarantees that there won't be further changes in the future.And that's just the US, there's almost 200 other countries each with their own laws.replyandrewinardeer 8 hours ago
| parent | prev | next [–]
Even abbreviations have issues. PST (UTC+8) is also Philippine Standard Time. EST could mean Eastern Standard Time in Australia, granted that nowadays is AEST.Timezones are such a headache. Obviously even UTC for a location varies depending on the time of year.Even the International Space Station shifted timezones from Houston time to UTC+0.Curiosity and Perseverance's clocks are UTC but operations run on LMST (local mean solar time) Gale Crater and LMST Jezero Crater- their landing locations. That point is moot until humans start spinning up VMs on Mars which they will one day.replylaurencerowe 4 hours ago
| root | parent | next [–]
> Obviously even UTC for a location varies depending on the time of year.The offset from UTC for a location varies depending on time of year but UTC definitionally has a zero offset throughout the year.If you’re in the Europe/London time zone your time is equal to GMT/UTC (offset zero) for half the year and BST (offset +1) for the other half.In other words we have two different types here: Timezones based on location where the UTC offset varies, and the UTC offset itself (like +0100/BST or +0000/GMT/Z.)replyjjmarr 2 hours ago
| parent | prev | next [–]
> Anyway, poor UX. But of course TZ names could also be argued as poor UX. What if you just did PST/PDT as Los Angeles, CA; Oregon, OR, and Seattle, WA all on separate line items?If your application can access the current location you don't need to expose a TZ selector to the user. You can figure out what time zone database sector you're in automatically.https://en.wikipedia.org/wiki/List_of_tz_database_time_zones...> Sure, it's duplicate data but a backend system (Postgres config files, say) should only store the value of the TZ, i.e. -7 / -8.Your backend needs to store location because places can switch time zones. The reason for the seemingly arbitrary list of cities is they each define a region where clocks have been synchronized since 1970.replyKwpolska 39 minutes ago
| root | parent | next [–]
I’m not letting applications access my location just to let it pick a time zone.IP geolocation is often wrong and inaccurate. I’ve had a VPS whose IP was geolocated 360 km away, in another country and time zone. But even with residential IPs, they might be pointing to a different time zone in countries with multiple zones.replyTerr_ 9 hours ago
| parent | prev | next [–]
A bit of an edge case, but there's also the problem that the time zone you pick today might not be the time zone you have tomorrow: The jurisdiction you're in can change what their clocks use on an institutional whim.It's very unlikely, but tomorrow some state or major city in PST could decide to add 15 minutes to all their wall clocks. Should your computer's clock change? That depends on what you're using it for...replyskissane 9 hours ago
| parent | prev | next [–]
> Let PDT be PDT(-8) and PST be PST(-7)The problem is both the US and Australia have “EST/EDT” - the Australian version sometimes has an A stuck on the front to disambiguate it from the US timezone, but that isn’t always done (especially given some systems insist timezone abbreviations can be max 3 characters). And the problem with disambiguating on the basis of UTC offsets is you’d be surprised by how many people have no clue what any of them are. But “Americas” vs “Australia”, they’ll get that rightreplyjoshka 2 hours ago
| parent | prev | next [–]
I just fired up the selector on macOS Sequoia and I see Seattle, Portland etc. when I type in the combo box (I'm not near there right now). Guessing that you're probably just seeing a ip geolocation that detected your location as further away.replyMBCook 7 hours ago
| parent | prev | next [–]
I suspect a large number of users might choose PST if in California, when they really mean PST/PDT. Or perhaps in the summer they would semi-correctly choose PDT.Choosing a large city you know shares your time zone does make things a bit more “human“.replySophira 34 minutes ago
| root | parent | next [–]
This absolutely would happen. Most Americans I know refer to their timezone as EST/CST/MST/PST even after March.replylmz 7 hours ago
| parent | prev | next [–]
Offset alone is not enough because different TZ names also point to different DST schedules (current and historic) and past changes.You can look at the tz data files to see what that looks like.replyBratmon 7 hours ago
| parent | prev | next [–]
I'm curious as to what people in Phoenix would select as their timezone under your proposed solution?replysimonw 5 hours ago
| parent | prev | next [–]
My prize for worst time zone UI still goes to Google calendar.If you want to create an event in a different time zone from your default the select picker it gives you is utterly incomprehensible.I can't even find the time zone for New York/US eastern in it!Screenshot here: https://static.simonwillison.net/static/2024/google-calendar...replyarccy 2 hours ago
| root | parent | next [–]
isn't it at GMT-4 Eastern Time - New York?replylstodd 9 hours ago
| parent | prev | next [–]
if one is serious, one just chooses UTC.one can play with timezones all they want, but in the end it's a presentation issue.replyTerr_ 6 hours ago
| root | parent | next [–]
>
in the end it's a presentation issue.Whoah there, no, that's a huge pitfall of sharpened spikes as soon as you deal with events in the future.If someone proposes an after-work party for "5:30 PM" at the Latverian office in Latverian time, that's not a fixed offset of seconds from now, it's actually a set of triggering conditions.We can make a decent guess about when those conditions will be satisfied, but don't actually know until it finally happens. At any moment, the administration of Dr. Doom could arbitrarily change the country's clocks. They might skip over that entire hour, or the hour might repeat on that day, or the entire country might cease to exist.Making a prediction in UTC and storing just that is a very bad idea, because you lost all the original context you need to recalculate a better prediction as things change. Storing the "5PM in Latverian" is how we keep that context.replyadrian_b 3 hours ago
| root | parent | next [–]
Here the problem is that past "time" values and future "time" values should be different data types, e.g. "Time" and "FutureTime".A past time value (e.g. the times of logged events) actually is a time value that is known and it should be stored as a TAI or UTC value and when desired it can be converted to any date/time format for presentation purposes.In most cases, a future time value is not a known time value yet and it must be stored as a more complex data type, at the minimum including the local time and the time zone, but for more distant future dates preferably also including the exact geographic location, for the eventuality of changes in the time zone laws.Therefore, both you and the poster to whom you have replied are right, but you are right only when talking about future time values, while the other poster was right only when talking about past time values.replykaoD 2 hours ago
| root | parent | next [–]
This is not about "future" or "past" dates but (to use Temporal as a common language) whether the date is an Instant or a ZonedDateTime conceptually.I think that's essentially what you mean, but it's an important distinction. It's use-case based. Making a data type time-based will not simplify, but only complicate things.[0] https://tc39.es/proposal-temporal/docs/replyanonymars 7 hours ago
| root | parent | prev | next [–]
UTC helps store specific moments in time. Notably it does not solve for "dates" nor recurrence. Many of my hairs have been lost to third parties thinking they've created viable systems simply because they use UTC.replyadrian_b 3 hours ago
| root | parent | next [–]
UTC or TAI are the right solution for storing past time values. Any other information is superfluous and it makes things more complicated than they should be.Future "time" values are typically not time values. Therefore they must be stored using a different more complex data type, which contains all the information that will be necessary in the future to determine the corresponding time value.Using the same data type to store both past time values and future time values is in most cases a serious programming mistake, which either wastes resources or is likely to cause bugs.replyhdgvhicv 42 minutes ago
| root | parent | next [–]
I wouldn’t say local time is superfluous, as it gives context.If a historic event occurred at 0300 on Feb 15th, there’s a significant amount of information in knowing the local time. Was it 3am in London, when most people would be asleep. Or was it 7pm Friday night In San Francisco when people were on Valentine's dates, or was it 3pm on Saturday afternoon when people were having a bbq.If you were to write “the accident occurred at 0300 UTC” then that would imply something very different depending on what the local time was at the time.How about “the shop opened at 9am every day, without fail”.Far more useful than “the shop opened at 1600UTC for half the year and 1700UTC for the other half”replyHackbraten 1 hour ago
| root | parent | prev | next [–]
I disagree. A stored value that was a future time value yesterday could become a past time value tomorrow. Keeping up with the invariant adds complexity because stored data would have to be migrated all the time.That added complexity can be much worse than using zoned values for everything.replyTerr_ 6 hours ago
| root | parent | prev | next [–]
It's a similar painful insanity as: "Other currencies? Just convert them to US dollars on save, and store that number in the database, nice and easy, no problems."replys20n 2 minutes ago
| root | parent | next [–]
This is a false analogy. Currencies are volatile whereas timezones are static and rule based.Converting timestamps between time zones is perfectly reversible while there is a loss of information when you convert a value to a new currency.p_ing 7 hours ago
| root | parent | prev | next [–]
Running UTC as a clock on an end user workstation is about the dumbest thing you can do (unless they reside in UTC).replyteo_zero 2 hours ago
| root | parent | next [–]
I must be the dumbest person in the world, then, because that's exactly what I've been doing on all my computers for 20 years (and I don't reside in Iceland).replyadrian_b 3 hours ago
| root | parent | prev | next [–]
I have set my clock on UTC on all my workstations, desktops and laptops for many decades. This has been particularly convenient on the laptops used in business trips.For many years, when I still had some other clocks besides those included in computers or mobile phones, e.g. wall clocks or wrist watches, those were also set in UTC, thus with no change between winter and DST.I prefer to keep in mind the current offset of my local time from UTC, and also the offsets of a couple of places where people with whom I communicate frequently are located, and to add those offsets mentally to the displayed UTC time when that happens to be necessary in order to synchronize to some external event, like a meeting or the opening hours of some place. I schedule my own activities, e.g. eating or sleeping, in UTC.This habit was triggered decades ago by the fact that I found much more annoying the hour change of all clocks to/from DST than changing in my mind the current offset of the local time from UTC, and also by the fact that the local time does not correspond with the solar time anyway, because I an not located on the center of the time zone, so if I want to know when it is noon, I have to also keep in mind the offset of the solar time from local time, which changes when DST applies. At least with UTC, that offset remains constant.I do not consider myself dumb :-)On the contrary, I consider that the legal time is designed for people who are so dumb that they cannot remember that during summer they should wake up and go to work earlier than in winter, the same as their ancestors did for many millennia. To be fair, their ancestors did not use a clock for this, but they woke up depending on the rising sun, which took care of this automatically.replylstodd 7 hours ago
| root | parent | prev | next [–]
Let's hear why you think this.replyTerr_ 6 hours ago
| root | parent | next [–]
Not parent poster, but: It creates annoyance and frustration for the end user, it creates new sources of error (especially when the end-user has to do time-conversions) and provides no actual benefits in terms of system correctness.What problem are you thinking it would solve?replyteo_zero 2 hours ago
| root | parent | next [–]
> What problem are you thinking it would solve?Traveling.replyizacus 3 hours ago
| root | parent | prev | next [–]
Thing is... noone resides in UTC at all.replybenjojo12 3 hours ago
| root | parent | next [–]
Reykjavik lives all year round in UTCreplywasmitnetzen 1 hour ago
| root | parent | next [–]
Places do not lie in UTC, data does. Iceland follows Western European Time (WET), which has no offset to UTC.replygerikson 3 hours ago
| root | parent | prev | next [–]
So does a large part of Western Africa.replysomat 8 hours ago
| root | parent | prev | next [–]
Doing this at the system level was one of the better ideas to come out of unix.replytomhow 9 hours ago
| prev | next [–]
Discussion about previous article in series:Debian 13, Postgres, and the US time zones - https://news.ycombinator.com/item?id=45218111 - Sept 2025 (142 comments)replyquuxplusone 8 hours ago
| parent | next [–]
Title should involve "US/*", not just "US".replythemafia 7 hours ago
| prev [–]
> I got to wondering... why did I pick "US/Pacific", anyway?That's what the authority that defines the zone calls it.
Using any other name is adding a useless layer of abstraction.replybouke 4 hours ago
| parent [–]
It is not, that’s the whole point of the blog post this one follows up on.reply
Guidelines | FAQ | Lists | API | Security | Legal | Apply to YC | Contact
Search: