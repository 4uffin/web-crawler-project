Add Debian 12 to 13 contribution · GitHub
Skip to content
Search Gists
Search Gists
All gists
Back to GitHub
Sign in
Sign up
Sign in
Sign up
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
Dismiss alert
Instantly share code, notes, and snippets.
bramtechs/upgrade-debian-wsl.md
Last active
September 17, 2025 08:10
Show Gist options
Download ZIP
Star
53
(53)
You must be signed in to star a gist
Fork
10
(10)
You must be signed in to fork a gist
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/bramtechs/50d724a33d37278d7ca003c6119c8fea.js&quot;&gt;&lt;/script&gt;
Save bramtechs/50d724a33d37278d7ca003c6119c8fea to your computer and use it in GitHub Desktop.
Code
Revisions
5
Stars
53
Forks
10
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/bramtechs/50d724a33d37278d7ca003c6119c8fea.js&quot;&gt;&lt;/script&gt;
Save bramtechs/50d724a33d37278d7ca003c6119c8fea to your computer and use it in GitHub Desktop.
Download ZIP
Add Debian 12 to 13 contribution
Raw
upgrade-debian-wsl.md
Upgrade Debian 9 (current WSL) to Debian 12 (bookworm testing)
Note: I do not maintain this gist anymore, but people report that it still works. Please check the comments for any revisions or extra things you should take into consideration.
As of writing, the Debian distro for WSL (Windows Subsystem for Linux) is quite old.
You can get more up-to-date package managers, text-editors and compilers by upgrading WSL to Debian 12 (current testing).
Root required
Use at your own risk, preferably on a fresh installation.
Choose 'yes' when Debian requests to restart services.
Install and open Debian on WSL (if not already)
wsl --install -d debian
wsl -d debian
Go into root
sudo -s
Upgrade Debian 9 to 10
apt update -y && \
apt upgrade -y && \
echo "deb http://deb.debian.org/debian/ buster main
deb http://deb.debian.org/debian/ buster-updates main
deb http://security.debian.org/debian-security buster/updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y
Upgrade Debian 10 to 11
echo "deb http://deb.debian.org/debian/ bullseye main
deb http://deb.debian.org/debian/ bullseye-updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y
Debian 11 to 12
echo "deb http://deb.debian.org/debian/ bookworm main
deb http://deb.debian.org/debian/ bookworm-updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y && \
apt autoremove -y && \
exit
Debian 12 to 13 (provided by MarkusGnigler)
echo "deb http://deb.debian.org/debian/ trixie main
deb http://deb.debian.org/debian/ trixie-updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y && \
apt autoremove -y && \
exit
Copy link
LamerManuel
commented
Jun 12, 2023
Thanks for sharing this post, worked out wonderfully.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
xemoe
commented
Jun 24, 2023
Thank you
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
tobe718
commented
Jun 30, 2023
I think we need to add a step to change the original /etc/apt/sources.list before step 3.
sudo sed -i s/deb.debian.org/archive.debian.org/g /etc/apt/sources.list
sudo sed -i 's|security.debian.org|archive.debian.org/debian-security/|g' /etc/apt/sources.list
sudo sed -i '/stretch-updates/d' /etc/apt/sources.list
Reference：
repository - Debian stretch repositories 404 Not Found - Stack Overflow
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
bosattam
commented
Jun 30, 2023
thanks!
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ravensorrow
commented
Aug 22, 2023
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
I've done something like this as far as organizing versions
grunk@BOHEMUTH-II:~$ ls -lash /etc/apt/sources.list.d/
total 20K
4.0K drwxr-xr-x 2 root root 4.0K Aug 22 16:01 .
4.0K drwxr-xr-x 8 root root 4.0K Aug 22 15:58 ..
4.0K -rw-r--r-- 1 root root
167 Aug 22 16:01 10.buster_sources.list
4.0K -rw-r--r-- 1 root root
104 Aug 22 16:00 11.bullseye_sources.list
4.0K -rw-r--r-- 1 root root
104 Aug 22 15:56 12.bookworm_sources.list
grunk@BOHEMUTH-II:~$
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
hchybz
commented
Sep 10, 2023
efficient, many thanks
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ef-klukacs
commented
Oct 18, 2023
Thanks for sharing this.. worked well for me
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
cl0rm
commented
Dec 16, 2023
worked great, however only in WSL2 mode.
When it is WSL1, usrmerge fails.
This can be fixed via wsl --set-version Debian 2
After the install you can change it back if you need WSL for some reason (serial ports for example)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ravensorrow
commented
Jan 26, 2024
worked great, however only in WSL2 mode. When it is WSL1, usrmerge fails. This can be fixed via wsl --set-version Debian 2 After the install you can change it back if you need WSL for some reason (serial ports for example)
Why are you switching back and forth between WSL.v1 and WSL.v2? Why not just commit to migrating your instance(s) to v2 and staying there?
Did you define the serial ports in your udev rules? If you did that in WSL.v1, then the migration to WSLv.2 should resolve any complications that arise out of those ports not working as intended from inside of your WSL.v2 container.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
trogper
commented
Mar 23, 2024
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
worked great, however only in WSL2 mode. When it is WSL1, usrmerge fails. This can be fixed via wsl --set-version Debian 2 After the install you can change it back if you need WSL for some reason (serial ports for example)
You do not need to switch to WSL2. As zhangboyang described the issue here:
wsl --shutdown
wsl -u root
apt upgrade # or apt install usrmerge
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
avecheria
commented
Jul 3, 2024
Upgrade still works fine, thanks!
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
damienxp6
commented
Oct 20, 2024
I think adding the following line on step 5 is a good idea :
deb http://security.debian.org/debian-security bookworm-security main
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
MarkusGnigler
commented
Jan 1, 2025
Debian 12 to 13:
echo "deb http://deb.debian.org/debian/ trixie main
deb http://deb.debian.org/debian/ trixie-updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y && \
apt autoremove -y && \
exit
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ravensorrow
commented
Jan 12, 2025
Debian 12 to 13:
echo "deb http://deb.debian.org/debian/ trixie main
deb http://deb.debian.org/debian/ trixie-updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y && \
apt autoremove -y && \
exit
This fails when it gets to processing triggers for systems and comes to a crashing halt.
Processing triggers for systemd (252.31-1~deb12u1) ...
Failed to retrieve unit state: Transport endpoint is not connected
Failed to try-restart systemd-binfmt.service: Transport endpoint is not connected
See system logs and 'systemctl status systemd-binfmt.service' for details.
Processing triggers for man-db (2.11.2-2) ...
Processing triggers for tex-common (6.18) ...
Running mutexes. This may take some time... done.
Processing triggers for dbus (1.14.10-1~deb12u1) ...
Processing triggers for sgml-base (1.31) ...
Processing triggers for install-info (6.8-6+b1) ...
Processing triggers for base-files (13.6) ...
Processing triggers for fontconfig (2.14.1-4) ...
Processing triggers for desktop-file-utils (0.26-1) ...
Setting up docbook-xml (4.5-13) ...
Setting up docbook5-xml (5.0-4) ...
Setting up lintian (2.121.1) ...
Setting up docbook-to-man (1:2.0.0-47) ...
Setting up docbook-xsl (1.79.2+dfsg-7) ...
Setting up docbook-xsl-ns (1.79.2+dfsg-7) ...
Processing triggers for sgml-base (1.31) ...
Setting up docbook-website (2.5.0.0-10) ...
Setting up docbook-ebnf (1.2~cr1-8) ...
Processing triggers for ca-certificates (20241223) ...
Updating certificates in /etc/ssl/certs...
0 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d...
done.
Processing triggers for sgml-base (1.31) ...
Processing triggers for ca-certificates-java (20240118) ...
done.
Errors were encountered while processing:
dict-wn
Error: Timeout was reached
E: Sub-process /usr/bin/dpkg returned an error code (1)
root@BOHEMUTH-II:/etc/apt/sources.list.d#
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ravensorrow
commented
Jan 13, 2025
Debian 12 to 13:
echo "deb http://deb.debian.org/debian/ trixie main
deb http://deb.debian.org/debian/ trixie-updates main" > /etc/apt/sources.list && \
apt update -y && \
apt upgrade -y && \
apt dist-upgrade -y && \
apt autoremove -y && \
exit
This fails when it gets to processing triggers for systems and comes to a crashing halt.
nvm, I fixed it. Rebooted WSL.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Footer
© 2025 GitHub, Inc.
Footer navigation
Terms
Privacy
Security
Status
Community
Docs
Contact
Manage cookies
Do not share my personal information
You can’t perform that action at this time.