HP Smart Storage Admin CLI (ssacli) installation and usage on Proxmox PVE (6.x) · GitHub
Skip to content
Search Gists
Search Gists
All gists
Back to GitHub
Sign in
Sign up
Sign in
Sign up
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
Dismiss alert
Instantly share code, notes, and snippets.
mrpeardotnet/PVE-HP-ssacli-smart-storage-admin.md
Last active
September 17, 2025 11:08
Show Gist options
Download ZIP
Star
248
(248)
You must be signed in to star a gist
Fork
105
(105)
You must be signed in to fork a gist
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/mrpeardotnet/a9ce41da99936c0175600f484fa20d03.js&quot;&gt;&lt;/script&gt;
Save mrpeardotnet/a9ce41da99936c0175600f484fa20d03 to your computer and use it in GitHub Desktop.
Code
Revisions
4
Stars
248
Forks
105
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/mrpeardotnet/a9ce41da99936c0175600f484fa20d03.js&quot;&gt;&lt;/script&gt;
Save mrpeardotnet/a9ce41da99936c0175600f484fa20d03 to your computer and use it in GitHub Desktop.
Download ZIP
HP Smart Storage Admin CLI (ssacli) installation and usage on Proxmox PVE (6.x)
Raw
PVE-HP-ssacli-smart-storage-admin.md
HP Smart Storage Admin CLI (ssacli) installation and usage on Proxmox PVE (6.x)
Why use HP Smart Storage Admin CLI?
You can use ssacli (smart storage administrator command line interface) tool to manage any of supported HP Smart Array Controllers in your Proxmox host without need to reboot your server to access Smart Storage Administrator in BIOS.
That means no host downtime when managing your storage.
CLI is not as convenient as GUI interface provided by BIOS or desktop utilities, but still allows you to fully manage your controller, physical disks and logical drives on the fly with no Proxmox host downtime.
ssacli replaces older hpssacli, but shares the same syntax and adds support for newer servers and controllers.
Installation
Installation process of the
ssacli package on Proxmox is the same as on any other Debian based system.
NOTE: HP does not provide Buster repository for Debian 10/Proxmox 6.x, but we can still use Stretch repository even that it's targeted for Debian 9/Proxmox 5.x.
Add HP's MCP repository
To add HP's MCP repository to apt sources list use this command:
echo "deb https://downloads.linux.hpe.com/SDR/repo/mcp bookworm/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
Download and add public keys for the MCP repository
Public keys are needed by apt to verify repository signatures, so we need to download and add them.
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey1024.pub | apt-key add -
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048.pub | apt-key add -
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key1.pub | apt-key add -
wget -q -O - https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub | apt-key add -
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key2.pub | apt-key add -
Installing the ssacli package
First, we need to update available packages:
apt update
And then we can install the ssacli package:
apt install ssacli
Using the ssacli tool
Command short and long names
All commands have a short name to reduce the length of the total input provided to the ssacli tool. You can use short or long name. Here is a list of all commands and their long and short names:
chassisname = ch
controller = ctrl
logicaldrive = ld
physicaldrive = pd
drivewritecache = dwc
licensekey = lk
You can specify disks also as:
A range of drives (bay 1 to 3): 1I:1:1-1I:1:3
Drives that are unassigned: allunassigned
Command examples
Here are few examples of
ssacli commands that you can use to diagnose and manage your HP Smart Storage Controller.
Show available controllers
ssacli ctrl all show
Show controllers status
ssacli ctrl all show status
Show detailed controllers information
ssacli ctrl all show detail
Show controllers configuration
ssacli ctrl all show config
Rescan for new devices
Useful after swapping disks in bays, etc...
ssacli rescan
Show all physical disks (or their status) (controller slot 0)
ssacli ctrl slot=0 pd all show
ssacli ctrl slot=0 pd all show status
Show all physical disks detailed information (controller slot 0)
ssacli ctrl slot=0 pd all show detail
Show logical drives (or their status) (controller slot 0, all or specific logical drive(s))
ssacli ctrl slot=0 ld all show
ssacli ctrl slot=0 ld all show status
ssacli ctrl slot=0 ld 1 show
ssacli ctrl slot=0 ld 1 show status
Show detailed logical drives information (controller slot 0, all or specific logical drive(s))
ssacli ctrl slot=0 ld all show detail
ssacli ctrl slot=0 ld 1 show detail
Show array information (controller slot 0, array A)
ssacli ctrl slot=0 array a show
Show array status (controller slot 0, all arrays)
ssacli ctrl slot=0 array all show status
Create new RAID 0 logical drive (controller slot 0, disk in port 1I:box 1:bay 1)
ssacli ctrl slot=0 create type=ld drives=1I:1:1 raid=0
Create new RAID 1 logical drive (controller slot 0, disks in port 1I:box 1:bay 1 and 2)
ssacli ctrl slot=0 create type=ld drives=1I:1:1,1I:1:2 raid=1
Create new RAID 5 logical drive
(controller slot 0, diks in port 1I:box 1:bay 1 to 4)
ssacli ctrl slot=0 create type=ld drives=1I:1:1-1I:1:4 raid=5
Delete logical drive (controller slot 0, logical drive 1)
ssacli ctrl slot=0 ld 1 delete
Add new physical disks to logical drive (controller slot 0, logical drive 1, disks in port 1I:box 1:bay 6 and 7)
ssacli ctrl slot=0 ld 2 add drives=1I:1:6,1I:1:7
Add spare disks (controller slot 0, logical drive 1, array A, disks in port 1I:box 1:bay 6 and 7)
ssacli ctrl slot=0 array a add spares=1I:1:6,1I:1:7
Add global spare disks (controller slot 0, logical drive 1, all arrays, disks in port 1I:box 1:bay 6 and 7)
ssacli ctrl slot=0 array all add spares=1I:1:6,1I:1:7
Turn on/off blink logical drive LED (controller slot 0, logical drive 1)
ssacli ctrl slot=0 ld 1 modify led=on
ssacli ctrl slot=0 ld 1 modify led=off
Turn on/off blink physical disk LED (controller slot 0, physical disk port 1I:box 1:bay 1)
ssacli ctrl slot=0 pd 1I:1:1 modify led=on
ssacli ctrl slot=0 pd 1I:1:1 modify led=off
Modify smart array cache read and write ratio (controller slot 0, cacheratio 80% read/20% write)
ssacli ctrl slot=0 modify cacheratio=80/20
Show physical drive write cache status (controller slot 0)
ssacli ctrl slot=0 modify dwc=?
Enable/disable physical drive write cache (controller slot 0)
Important: Because physical drive write cache is not battery-backed, you could lose data if a power failure occurs during a write process. To minimize this possibility, use a backup power supply.
ssacli ctrl slot=0 modify dwc=enable
ssacli ctrl slot=0 modify dwc=disable
Show status of smart array write cache when no battery is present (no-battery write cache option, controller slot 0)
ssacli ctrl slot=0 modify nbwc=?
Enable/disable smart array write cache when no battery is present (no-battery write cache option, controller slot 0)
ssacli ctrl slot=0 modify nbwc=enable
ssacli ctrl slot=0 modify nbwc=disable
Enable/disable smart array cache for certain Logical Volume (controller slot 0, logical drive 1)
ssacli ctrl slot=0 ld 1 modify arrayaccelerator=enable
ssacli ctrl slot=0 ld 1 modify arrayaccelerator=disable
Enable/disable SSD Smart Path (controller slot 0, array A)
ssacli ctrl slot=0 array a modify ssdsmartpath=enable
ssacli ctrl slot=0 array a modify ssdsmartpath=disable
Show spare activation mode
ssacli ctrl slot=0 modify spareactivationmode=?
Set spare activation mode
ssacli ctrl slot=0 modify spareactivationmode=predictive
ssacli ctrl slot=0 modify spareactivationmode=failure
Show rebuild priority
ssacli ctrl slot=0 modify rp=?
Modify rebuild priority
ssacli ctrl slot=0 modify rp=low
ssacli ctrl slot=0 modify rp=medium
ssacli ctrl slot=0 modify rp=mediumhigh
ssacli ctrl slot=0 modify rp=high
Erase Physical Drive (controller slot 0, physical disk port 1I:box 1:bay 1)
ssacli ctrl slot=0 pd 1I:1:1 modify erase
Load earlier comments...
Copy link
Alex-Covecube
commented
Dec 12, 2023
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
To install on on Ubuntu Server 24.04 (updated to https)
echo "deb [signed-by=/etc/apt/trusted.gpg.d/hpePublicKey2048_key2.gpg] https://downloads.linux.hpe.com/SDR/repo/mcp/ubuntu/ noble/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey1024.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpPublicKey1024.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpPublicKey2048.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key1.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpPublicKey2048_key1.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpePublicKey2048_key1.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key2.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpePublicKey2048_key2.gpg
apt update
apt install ssacli
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ikalafat
commented
Dec 13, 2023
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
for Proxmox 8 on Debian 12 (bookworm)
echo "deb http://downloads.linux.hpe.com/SDR/repo/mcp bookworm/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey1024.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpPublicKey1024.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpPublicKey2048.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key1.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpPublicKey2048_key1.gpg
wget -q -O - https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub | gpg --dearmor > /etc/apt/trusted.gpg.d/hpePublicKey2048_key1.gpg
apt update
apt install ssacli
edit, works with DL360 Gen10 with P408i controller
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
JohnnyBravoNL
commented
Dec 13, 2023
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
For Proxmox 8 (Debian bookworm), confirmed to be working on HP DL380 gen 9 using Smart HBA H240
echo "deb http://downloads.linux.hpe.com/SDR/repo/mcp bookworm/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
Further as per the post from @Alex-Covecube
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
deepcloudindia
commented
Jan 4, 2024
Hello,
I am on HP DL385 Gen10 Plus V2 with HP 416a-i Tri-mode controller in RAID 1 for OS and RAID-0 for the other drives.
with Proxmox 8.1.3
but i get error - no controllers detected possible causes: ....
I have done modprobe sg to load the scsi generic module ? see the attached screenshot.
Thanks in advance.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ars1364
commented
Jan 17, 2024
this one helped me:
ssacli controller slot=0 physicaldrive 1I:1:1 modify clearconfigdata
to clear old raid configuration remained in disk
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
jmacis
commented
Feb 16, 2024
Got it working on Proliant DL360 GEN9 Smart Array P440ar.
ssacli version
SSACLI Version: 6.15.11.0 2022-11-01
SOULAPI Version: 6.15.11.0 2022-11-01
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
deepcloudindia
commented
Feb 16, 2024
via email
Unfortunately I am on DL385 Gen10 Plus V2 on 416i controller and it does
nothing no response on running ssacli
<https://www.deepcloud.in/>
<https://www.deepcloud.in>
Arpan Arora
Co-Founder and Director
DeepCloud Pvt. Ltd <https://www.deepcloud.in>
[image: phone]
+919141414242
<https://wa.me/919141414242>
[image: envelope]
***@***.***
[image: globe]
https://www.deepcloud.in
[image: facebook] <https://www.facebook.com/Deep-Cloud-103834609063642> [image:
instagram] <https://www.instagram.com/deepcloudin/> [image: twitter]
<https://twitter.com/deepcloudin> [image: linkedin]
<https://www.linkedin.com/company/deep-cloud-private-limited> [image:
youtube] <https://www.youtube.com/channel/UCet1cLBf9CiZVKREkRkVgrA>
[image: Email Badge] <https://emailbadge.com/?utm_source=signature>
…
On Sat, 17 Feb 2024 at 3:05 AM, jmacis ***@***.***> wrote:
***@***.**** commented on this gist.
------------------------------
Got it working on Proliant DL360 GEN9 Smart Array P440ar.
ssacli version
SSACLI Version: 6.15.11.0 2022-11-01
SOULAPI Version: 6.15.11.0 2022-11-01
—
Reply to this email directly, view it on GitHub
<https://gist.github.com/mrpeardotnet/a9ce41da99936c0175600f484fa20d03#gistcomment-4906937>
or unsubscribe
<https://github.com/notifications/unsubscribe-auth/BFDO6WWN2OBQMEIWRDJUT2DYT6UX7BFKMF2HI4TJMJ2XIZLTSKBKK5TBNR2WLJDUOJ2WLJDOMFWWLO3UNBZGKYLEL5YGC4TUNFRWS4DBNZ2F6YLDORUXM2LUPGBKK5TBNR2WLJDHNFZXJJDOMFWWLK3UNBZGKYLEL52HS4DFVRZXKYTKMVRXIX3UPFYGLK2HNFZXIQ3PNVWWK3TUUZ2G64DJMNZZDAVEOR4XAZNEM5UXG5FFOZQWY5LFVA4TSNRXG4YTONNHORZGSZ3HMVZKMY3SMVQXIZI>
.
You are receiving this email because you commented on the thread.
Triage notifications on the go with GitHub Mobile for iOS
<https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>
or Android
<https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>
.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
kiwipaulrob
commented
Mar 3, 2024
I am having the same problem as deepcloudindia - a error saying that the driver has not been installed.
Anyone have any suggestions?
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
elmer666
commented
Mar 24, 2024
Hello.
I have problem with my new bought h240 controller. It's working in Pcie 3.0 x1 mode ( " Negotiated PCIe Data Rate: PCIe 3.0 x1 (985 MB/s)" ) and i think that it should be working "a little" bit faster. Do anyone know how to fix this problem?
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
itefimov
commented
Mar 25, 2024
It was very helpful for me with DL180G6+P410
Thanks very much.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
MajidAhmadit
commented
Mar 26, 2024
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
Hi ,
I have 100+ servers and need to define raid 0 for all before using kickstart script for running OS ,
Is there any solution using
"ssacli"
to define a raid for them without having an OS ?
a command like :
" perl locfg.pl -s HOSTNAME -f FILE.xml"
that we use for working with ilo?
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
mbelanger
commented
Mar 27, 2024
I'm also having trouble with ssacli and a P222 installed within a Microserver Gen 8.
lsmod shows hpsa as installed. Any pointers greatly appreciated.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
lslamp
commented
Apr 24, 2024
I am new to HP servers and Raid Arrays, I have learnt a lot over the last days.
I have a HP Proliant DL360 Gen9 server, I have a raid 6 configured with 5 disks at the moment and tried to add 3 more disks.
The issue I ran into was after the ILO update, I could not open the Smart Array Management from the reboot.
I have now installed ssacli on the server and have access to the disk management but I run into an issue that I do not understand. when trying to add the disks to the current array, I get the following error.
This is what I have.
Array A (SAS, Unused Space: 1
MB)
logicaldrive 1 (3.27 TB, RAID 6, OK)
physicaldrive 1I:1:2 (port 1I:box 1:bay 2, SAS HDD, 1.2 TB, OK)
physicaldrive 1I:1:4 (port 1I:box 1:bay 4, SAS HDD, 1.2 TB, OK)
physicaldrive 2I:1:6 (port 2I:box 1:bay 6, SAS HDD, 1.2 TB, OK)
physicaldrive 2I:1:7 (port 2I:box 1:bay 7, SAS HDD, 1.2 TB, OK)
physicaldrive 2I:1:8 (port 2I:box 1:bay 8, SAS HDD, 1.2 TB, OK)
Unassigned
physicaldrive 1I:1:1 (port 1I:box 1:bay 1, SAS HDD, 1.2 TB, OK)
physicaldrive 1I:1:3 (port 1I:box 1:bay 3, SAS HDD, 1.2 TB, OK)
physicaldrive 2I:1:5 (port 2I:box 1:bay 5, SAS HDD, 1.2 TB, OK)
This is what I am trying,
ssacli ctrl slot=0 array A add drives=1I:1:1,1I:1:3,2I:1:5
Error: This operation is not supported with the current configuration. Use the
"show" command on devices to show additional details about the
configuration.
Reason: Transformation size zero. This may indicate that there is no
cache backup power source or a failed backup power source on the
controller.
Anyone tell me why this is happening. What has a backup power supply got to do with adding disks to an array?
Thanks
Lawrence
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
svh1985
commented
Aug 6, 2024
I've updated the commands a bit to mitigate the apt-key depreciation. Hope it helps!
Tested on Debian Bookworm.
wget http://downloads.linux.hpe.com/SDR/hpPublicKey1024.pub
wget http://downloads.linux.hpe.com/SDR/hpPublicKey2048.pub
wget http://downloads.linux.hpe.com/SDR/hpPublicKey2048_key1.pub
wget http://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey1024.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey1024.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey2048.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey2048.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey2048_key1.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpePublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpePublicKey2048_key1.gpg
rm hpPublicKey1024.pub hpPublicKey2048.pub hpPublicKey2048_key1.pub hpePublicKey2048_key1.pub temp-keyring.gpg temp-keyring.gpg~
mkdir -p /etc/apt/keyrings
mv -f hpPublicKey1024.gpg hpPublicKey2048.gpg hpPublicKey2048_key1.gpg hpePublicKey2048_key1.gpg /etc/apt/keyrings/
echo "deb [signed-by=/etc/apt/keyrings/hpPublicKey1024.gpg,/etc/apt/keyrings/hpPublicKey2048.gpg,/etc/apt/keyrings/hpPublicKey2048_key1.gpg,/etc/apt/keyrings/hpePublicKey2048_key1.gpg] http://downloads.linux.hpe.com/SDR/repo/mcp stretch/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
apt update
apt install ssacli -y
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
ha11oga11o
commented
Oct 26, 2024
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
I
I've updated the commands a bit to mitigate the apt-key depreciation. Hope it helps!
Tested on Debian Bookworm.
wget http://downloads.linux.hpe.com/SDR/hpPublicKey1024.pub
wget http://downloads.linux.hpe.com/SDR/hpPublicKey2048.pub
wget http://downloads.linux.hpe.com/SDR/hpPublicKey2048_key1.pub
wget http://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey1024.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey1024.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey2048.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey2048.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey2048_key1.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpePublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpePublicKey2048_key1.gpg
rm hpPublicKey1024.pub hpPublicKey2048.pub hpPublicKey2048_key1.pub hpePublicKey2048_key1.pub temp-keyring.gpg temp-keyring.gpg~
mkdir -p /etc/apt/keyrings
mv -f hpPublicKey1024.gpg hpPublicKey2048.gpg hpPublicKey2048_key1.gpg hpePublicKey2048_key1.gpg /etc/apt/keyrings/
echo "deb [signed-by=/etc/apt/keyrings/hpPublicKey1024.gpg,/etc/apt/keyrings/hpPublicKey2048.gpg,/etc/apt/keyrings/hpPublicKey2048_key1.gpg,/etc/apt/keyrings/hpePublicKey2048_key1.gpg] http://downloads.linux.hpe.com/SDR/repo/mcp stretch/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
apt update
apt install ssacli -y
I am sorry, not that im knowledge linux user, but can you please confirm this line:
echo "deb [signed-by=/etc/apt/keyrings/hpPublicKey1024.gpg,/etc/apt/keyrings/hpPublicKey2048.gpg,/etc/apt/keyrings/hpPublicKey2048_key1.gpg,/etc/apt/keyrings/hpePublicKey2048_key1.gpg] http://downloads.linux.hpe.com/SDR/repo/mcp stretch/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
This URL goes nowhere:
http://downloads.linux.hpe.com/SDR/repo/mcp stretch/current non-free
Should that be:
https://downloads.linux.hpe.com/SDR/repo/mcp/debian/dists/bookworm/current/non-free
Thay stated:
"Notices
To enhance security, please ensure that you access our website using HTTPS rather than HTTP.
We will no longer guarantee access through HTTP. Thank you for your understanding and cooperation."
might be they change also paths too? Im trying to install this on DL380 G7 with P410i. But mine knowledge is so low that i dont dare to do it if its not 1000% correct.
Again,
i dont want to be smart ass, it just look strange to me. And i would someone whos smarter than me confirm.
Thanks
EDIT: Forgive me for my curiosity. I set up another HP DL380 G7, installed Proxmox 8.2 and after install by this guide all works fine. Thank you :)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
fknorn
commented
Nov 10, 2024
Same issue here - any pointers?! Thanks!
Hello, I am on HP DL385 Gen10 Plus V2 with HP 416a-i Tri-mode controller in RAID 1 for OS and RAID-0 for the other drives. with Proxmox 8.1.3
but i get error - no controllers detected possible causes: .... I have done modprobe sg to load the scsi generic module ? see the attached screenshot.
Thanks in advance.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
PCS70
commented
Nov 28, 2024
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
Instead of the HP Smart Storage Administraor client tools you probably need the HPE MegaRAID Storage Administrator client tools.
https://hifish.ch/en/2023/03/04/no-hpe-ssa-support-for-hpe-megaraid-controllers/
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
mejofi
commented
Dec 21, 2024
For those unsure how to set up the correct repository manually, HPE provides their add_repo.sh script, available here;
https://downloads.linux.hpe.com/SDR/getting_started.html
Then run it like so;
$ sudo sh add_repo.sh mcp
It's been a while since it has been updated, so you will still wanted to change the transport protocol to HTTPS manually afterwards, since they state that they can no longer guarantee access via plain HTTP;
$ sudo sed -i -e 's/http:/https:/' /etc/apt/sources.list.d/HPE-mcp.list
Also, I only needed the most recent of the public keys to install ssacli on Debian Bookworm;
$ wget -q -O - https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub | sudo tee /etc/apt/trusted.gpg.d/hpePublicKey2048_key1.asc
$ sudo apt update
$ sudo apt install ssacli
The above also works if you've done a minimal Debian install, which doesn't add gpg and its attendant packages by default.
There might be a reason to go through the elaborate gpg --dearmor steps that I am not aware of, though.
$ sudo ssacli ctrl all show
Smart Array P440ar in Slot 0 (Embedded)
(sn: PDNLHXXXXXXXXX)
Et voilà!
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
mrpeardotnet
commented
Jan 24, 2025
Guys, thank you all for the updates in comments. I am not using HP nor Proxmox on my daily job anymore, so I am not able to update the scripts with latest info. So your feedback here with your updates is very appreciated!
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
wols
commented
Feb 20, 2025
Hi,
after "Add new physical disks to logical drive" very helpful:
Extend Logical Drive
ssacli ctrl slot=0 ld 2 modify size=max
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
lifa1225
commented
Jun 13, 2025
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
The cpu architecture of my server is aarch64. Could you provide ssacli for this architecture? Thanks!
[root@172.18.11.4 ~]# lspci |grep -i adap
01:00.0 Serial Attached SCSI controller: Adaptec Smart Storage PQI 12G SAS/PCIe 3 (rev 01)
[root@172.18.11.4 ~]# lscpu
Architecture:
aarch64
CPU op-mode(s):
64-bit
Byte Order:
Little Endian
CPU(s):
96
On-line CPU(s) list:
0-95
Thread(s) per core:
1
Core(s) per socket:
48
Socket(s):
2
NUMA node(s):
4
Vendor ID:
HiSilicon
Model:
0
Model name:
Kunpeng-920
Stepping:
0x1
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
si458
commented
Jun 13, 2025
@lifa1225 unfortunately I don't think hp offer arm64 binarys yet
https://downloads.linux.hpe.com/SDR/repo/mcp/Ubuntu/dists/24.04-LTS/current/non-free/
Only x32 and x64
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
hillbicks
commented
Jun 25, 2025
I've updated the commands a bit to mitigate the apt-key depreciation. Hope it helps!
Tested on Debian Bookworm.
urls needs to be https as of today. Thanks for the writeup though!
wget https://downloads.linux.hpe.com/SDR/hpPublicKey1024.pub
wget https://downloads.linux.hpe.com/SDR/hpPublicKey2048.pub
wget https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key1.pub
wget https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey1024.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey1024.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey2048.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey2048.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpPublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpPublicKey2048_key1.gpg
gpg --no-default-keyring --keyring ./temp-keyring.gpg --import hpePublicKey2048_key1.pub
gpg --no-default-keyring --keyring ./temp-keyring.gpg --export --output hpePublicKey2048_key1.gpg
rm hpPublicKey1024.pub hpPublicKey2048.pub hpPublicKey2048_key1.pub hpePublicKey2048_key1.pub temp-keyring.gpg temp-keyring.gpg~
mkdir -p /etc/apt/keyrings
mv -f hpPublicKey1024.gpg hpPublicKey2048.gpg hpPublicKey2048_key1.gpg hpePublicKey2048_key1.gpg /etc/apt/keyrings/
echo "deb [signed-by=/etc/apt/keyrings/hpPublicKey1024.gpg,/etc/apt/keyrings/hpPublicKey2048.gpg,/etc/apt/keyrings/hpPublicKey2048_key1.gpg,/etc/apt/keyrings/hpePublicKey2048_key1.gpg] https://downloads.linux.hpe.com/SDR/repo/mcp stretch/current non-free" > /etc/apt/sources.list.d/hp-mcp.list
apt update
apt install ssacli -y
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
theredcmdcraft
commented
Jun 27, 2025
•
edited
Loading
Uh oh!
There was an error while loading. Please reload this page.
The Links for the apt-keys with http will not work. You have to use https instead.
@mrpeardotnet : Do you can change it to https, please? There is also a new key2:
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key2.pub | apt-key add -
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
mrpeardotnet
commented
Jul 16, 2025
The Links for the apt-keys with http will not work. You have to use https instead.
@mrpeardotnet : Do you can change it to https, please? There is also a new key2:
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key2.pub | apt-key add -
I've updated the key scripts to use https and I've also added the hpPublicKey2048_key2.
If any issues found, please let me know.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
si458
commented
Jul 18, 2025
@mrpeardotnet you forgot to update the MCP repo as thats still showing as http but should be https
also you can update the repo to bookworm/current as that fully works with Proxmox 8
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
Author
mrpeardotnet
commented
Jul 18, 2025
@mrpeardotnet you forgot to update the MCP repo as thats still showing as http but should be https also you can update the repo to bookworm/current as that fully works with Proxmox 8
OK done, thanks for notes.
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
citroniais
commented
Aug 29, 2025
Hi @mrpeardotnet,
I just checked and there's no key at this URL that @theredcmdcraft gave you in June :
The Links for the apt-keys with http will not work. You have to use https instead.
@mrpeardotnet : Do you can change it to https, please? There is also a new key2:
wget -q -O - https://downloads.linux.hpe.com/SDR/hpPublicKey2048_key2.pub | apt-key add -
I found another key at this URL instead. Don't know if it's useful, but here's the URL. Maybe he was talking about this one?
wget -q -O - https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key2.pub | apt-key add -
changed "hp" to "hpe" in the name of the file
Anyway, thank you for your work!
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
mbretter
commented
Sep 14, 2025
It seems that the DNS entries for downloads.linux.hpe.com disappeared:
mbretter@zenmaster:~$ host
downloads.linux.hpe.com
Host downloads.linux.hpe.com not found: 3(NXDOMAIN)
Checking authoritive servers:
mbretter@zenmaster:~$ host
downloads.linux.hpe.com ns1.hpe.com
Using domain server:
Name: ns1.hpe.com
Address: 192.58.206.184#53
Aliases:
downloads.linux.hpe.com is an alias for downloads-linux-glb.it.hpe.com.
Host downloads-linux-glb.it.hpe.com not found: 3(NXDOMAIN)
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Copy link
mkaatman
commented
Sep 14, 2025
It appears it's back. I can hit the web page.
host downloads.linux.hpe.com
downloads.linux.hpe.com is an alias for downloads-linux-glb.it.hpe.com.
downloads-linux-glb.it.hpe.com has address 16.230.112.82
Sorry, something went wrong.
Uh oh!
There was an error while loading. Please reload this page.
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Footer
© 2025 GitHub, Inc.
Footer navigation
Terms
Privacy
Security
Status
Community
Docs
Contact
Manage cookies
Do not share my personal information
You can’t perform that action at this time.