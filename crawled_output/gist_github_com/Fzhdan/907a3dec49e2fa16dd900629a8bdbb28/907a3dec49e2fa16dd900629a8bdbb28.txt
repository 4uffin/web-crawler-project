concat_video.sh · GitHub
Skip to content
Search Gists
Search Gists
All gists
Back to GitHub
Sign in
Sign up
Sign in
Sign up
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
Dismiss alert
Instantly share code, notes, and snippets.
Fzhdan/concat_video.sh
Forked from kanefron5/concat_video.sh
Created
September 19, 2025 23:49
Show Gist options
Download ZIP
Star
1
(1)
You must be signed in to star a gist
Fork
0
(0)
You must be signed in to fork a gist
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/Fzhdan/907a3dec49e2fa16dd900629a8bdbb28.js&quot;&gt;&lt;/script&gt;
Save Fzhdan/907a3dec49e2fa16dd900629a8bdbb28 to your computer and use it in GitHub Desktop.
Code
Revisions
1
Stars
1
Embed
Embed
Embed this gist in your website.
Share
Copy sharable link for this gist.
Clone via HTTPS
Clone using the web URL.
Learn more about clone URLs
Clone this repository at &lt;script src=&quot;https://gist.github.com/Fzhdan/907a3dec49e2fa16dd900629a8bdbb28.js&quot;&gt;&lt;/script&gt;
Save Fzhdan/907a3dec49e2fa16dd900629a8bdbb28 to your computer and use it in GitHub Desktop.
Download ZIP
Raw
concat_video.sh
#!/bin/bash
# Проверяем, был ли передан путь к основной папке с видео через аргумент командной строки
if [ -z "$1" ]; then
echo "Пожалуйста, укажите путь к основной папке с видео."
exit 1
fi
# Получаем путь к основной папке с видео из аргумента командной строки
video_directory="$1"
# Проверяем существование основной папки с видео
if [ ! -d "$video_directory" ]; then
echo "Указанная основная папка с видео не существует."
exit 1
fi
# Получаем список подпапок в основной папке с видео
subdirectories=$(find "$video_directory" -type d)
# Обходим каждую подпапку и выполняем объединение видео файлов
for subdir in $subdirectories; do
# Переходим в подпапку
cd "$subdir" || continue
# Создаем файл для записи списка видео файлов
list_file="filelist.txt"
# Создаем пустой файл списка
> "$list_file"
# Получаем отсортированный список видео файлов и записываем их в файл списка
find . -maxdepth 1 -type f -name "*.mp4" | sort | while read -r file; do
echo "file '$file'" >> "$list_file"
done
# Определяем имя выходного файла
output_file="output.mp4"
rm "$output_file"
# Используем утилиту ffmpeg для объединения видео файлов
ffmpeg -f concat -safe 0 -i "$list_file" -c copy "$output_file" >/dev/null 2>&1
# Удаляем файл списка
rm "$list_file"
echo "Объединение видео файлов в папке '$subdir' завершено! Результат сохранен в файле: $output_file"
# Возвращаемся в основную папку
cd "$video_directory"
done
# Переходим в родительскую папку
cd "$video_directory" || exit 1
# Создаем файл для записи списка выходных файлов
output_list="output_list.txt"
# Создаем пустой файл списка
> "$output_list"
# Получаем отсортированный список всех `output.mp4` файлов и записываем их в файл списка
find . -type f -name "output.mp4" | sort | while read -r output; do
echo "file '$output'" >> "$output_list"
done
# Определяем имя конечного выходного файла
final_output="final_output.mp4"
# Используем утилиту ffmpeg для объединения `output.mp4` файлов в один большой файл
ffmpeg -f concat -safe 0 -i "$output_list" -c copy "$final_output" >/dev/null 2>&1
# Удаляем файл списка
rm "$output_list"
echo "Объединение всех 'output.mp4' файлов в родительской папке завершено! Результат сохранен в файле: $final_output"
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Footer
© 2025 GitHub, Inc.
Footer navigation
Terms
Privacy
Security
Status
Community
Docs
Contact
Manage cookies
Do not share my personal information
You can’t perform that action at this time.